{"version":3,"file":"kubewarden-3.0.0.umd.min.list.js","mappings":"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","sources":["webpack://kubewarden-3.0.0/./components/Policies/PolicyList.vue","webpack://kubewarden-3.0.0/./components/Policies/PolicyList.vue?c0ac","webpack://kubewarden-3.0.0/./list/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-3.0.0/./list/policies.kubewarden.io.admissionpolicy.vue?4059","webpack://kubewarden-3.0.0/./list/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-3.0.0/./modules/policies.ts","webpack://kubewarden-3.0.0/./list/policies.kubewarden.io.clusteradmissionpolicy.vue?020c","webpack://kubewarden-3.0.0/./list/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-3.0.0/./list/policies.kubewarden.io.policyserver.vue?5305","webpack://kubewarden-3.0.0/./components/Policies/PolicyList.vue?38f2","webpack://kubewarden-3.0.0/./components/Policies/PolicyList.vue?0686"],"sourcesContent":["<script>\nimport flattenDeep from 'lodash/flattenDeep';\nimport { sortBy } from '@shell/utils/sort';\n\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nexport default {\n  components: { LabeledSelect, ResourceTable },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true\n    },\n    rows: {\n      type:     Array,\n      required: true\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      mode:             null,\n      resources:        null\n    };\n  },\n\n  created() {\n    this.mode = 'All';\n  },\n\n  computed: {\n    headers() {\n      return this.$store.getters['type-map/headersFor'](this.schema);\n    },\n\n    filteredRows() {\n      const rows = ( this.rows || [] );\n\n      const out = rows.filter((row) => {\n        const flatRules = flattenDeep(row.spec.rules);\n        const flatResources = flatRules.flatMap(r => r.resources);\n        const rowMode = row.spec.mode;\n\n        if ( this.mode && this.mode !== 'All' && this.mode !== rowMode ) {\n          return false;\n        }\n\n        if ( this.resources ) {\n          for ( const selected of this.resources ) {\n            if ( !flatResources.includes(selected) ) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n\n      return sortBy(out, ['id']);\n    },\n\n    modeOptions() {\n      const out = this.rows?.map(row => row.spec?.mode) || [];\n\n      out.unshift('All');\n\n      return [...new Set(out)];\n    },\n\n    resourceOptions() {\n      return this.flattenRule('resources');\n    }\n  },\n\n  methods: {\n    flattenRule(option) {\n      const flattened = this.rows?.flatMap((row) => {\n        const flatRules = flattenDeep(row.spec?.rules);\n\n        return flatRules.flatMap(r => r[option]);\n      });\n\n      return [...new Set(flattened)] || [];\n    },\n\n    hasNamespaceSelector(row) {\n      return row.namespaceSelector;\n    },\n\n    resetFilter() {\n      this.resources = null;\n      this.mode = 'All';\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"filter\">\n      <LabeledSelect\n        v-model:value=\"resources\"\n        :clearable=\"true\"\n        :taggable=\"true\"\n        :multiple=\"true\"\n        class=\"filter__resources\"\n        label=\"Search by Resource\"\n        :options=\"resourceOptions\"\n      />\n      <LabeledSelect\n        v-model:value=\"mode\"\n        :clearable=\"true\"\n        :searchable=\"false\"\n        :options=\"modeOptions\"\n        :multiple=\"false\"\n        placement=\"bottom\"\n        class=\"filter__mode\"\n        label=\"Search by Mode\"\n      />\n      <button\n        ref=\"btn\"\n        class=\"btn, btn-sm, role-primary\"\n        type=\"button\"\n        @click=\"resetFilter\"\n      >\n        {{ t('kubewarden.utils.resetFilter') }}\n      </button>\n    </div>\n\n    <ResourceTable :schema=\"schema\" :rows=\"filteredRows\" :headers=\"headers\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.filter {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-self: flex-end;\n\n  & > * {\n    margin: 10px;\n  }\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n}\n\n@media only screen and (min-width: map-get($breakpoints, '--viewport-4')) {\n  .filter {\n    width: 100%;\n  }\n}\n@media only screen and (min-width: map-get($breakpoints, '--viewport-12')) {\n  .filter {\n    width: 75%;\n  }\n}\n\n.policy {\n  &__mode {\n    display: flex;\n    align-items: center;\n\n    i {\n      margin-left: 5px;\n      font-size: 22px;\n      color: var(--warning);\n    }\n  }\n}\n</style>\n","import { render } from \"./PolicyList.vue?vue&type=template&id=9dcc5668&scoped=true\"\nimport script from \"./PolicyList.vue?vue&type=script&lang=js\"\nexport * from \"./PolicyList.vue?vue&type=script&lang=js\"\n\nimport \"./PolicyList.vue?vue&type=style&index=0&id=9dcc5668&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9dcc5668\"]])\n\nexport default __exports__","<script>\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\n\nimport PolicyList from '../components/Policies/PolicyList';\n\nexport default {\n  components: {\n    Banner, Loading, PolicyList\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n  },\n\n  computed: {\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      data-testid=\"kw-ap-list-banner\"\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.admissionPolicy.description')\"\n    />\n\n    <PolicyList data-testid=\"kw-ap-policy-list\" :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import { render } from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=template&id=08772963\"\nimport script from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { CATALOG, UI_PLUGIN } from '@shell/config/types';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { KUBEWARDEN_APPS, KUBEWARDEN_CHARTS, KUBEWARDEN_PRODUCT_NAME } from '../types';\nimport { kwDefaultsHelmChartSettings } from '../modules/policies';\n\nimport PolicyList from '../components/Policies/PolicyList';\nimport DefaultsBanner from '../components/DefaultsBanner';\n\nexport default {\n  components: {\n    Banner, Loading, PolicyList, DefaultsBanner\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    // needed to populate banner for edit settings compatibility for kubewarden-default CAP's\n    if ( this.$store.getters['cluster/canList'](CATALOG.APP) ) {\n      this.$store.dispatch('cluster/findAll', { type: CATALOG.APP });\n    }\n    if ( this.$store.getters['cluster/canList'](UI_PLUGIN) ) {\n      this.$store.dispatch('cluster/findAll', { type: UI_PLUGIN });\n    }\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n  },\n\n  computed: {\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    },\n    allApps() {\n      return this.$store.getters['cluster/all'](CATALOG.APP);\n    },\n    kubewardenDefaultsApp() {\n      if ( this.allApps ) {\n        return this.allApps?.find((a) => {\n          return (\n            a.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME] === KUBEWARDEN_APPS.RANCHER_DEFAULTS ||\n            a.spec?.chart?.metadata?.name === KUBEWARDEN_CHARTS.DEFAULTS\n          );\n        });\n      }\n\n      return null;\n    },\n    kubewardenExtension() {\n      const extensionsInstalled = this.$store.getters['uiplugins/plugins'] || [];\n\n      return extensionsInstalled?.find(ext => ext?.id?.includes(KUBEWARDEN_PRODUCT_NAME));\n    },\n    kwDefaultsHelmChartSettingsCompatible() {\n      const kwDefaultsVersion = this.kubewardenDefaultsApp?.spec?.chart?.metadata?.version;\n      const uiPluginVersion = this.kubewardenExtension?.version;\n\n      if ( kwDefaultsVersion && uiPluginVersion) {\n        return kwDefaultsHelmChartSettings(kwDefaultsVersion, uiPluginVersion);\n      }\n\n      return true;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      data-testid=\"kw-cap-list-banner\"\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.clusterAdmissionPolicy.description')\"\n    />\n    <DefaultsBanner\n      v-if=\"!kwDefaultsHelmChartSettingsCompatible\"\n      mode=\"upgrade\"\n    />\n\n    <PolicyList data-testid=\"kw-cap-policy-list\" :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import semver from 'semver';\n\n/**\n * Determines if the Kubewarden Extension is compatible with kubewarden-defaults version for displaying settings edit\n * for Kubewarden Extension `>= 1.4.2` it requires kubewarden-defaults version of `>= 2.0.0`\n * @param string\n * @param string\n * @returns Object\n */\nexport function kwDefaultsHelmChartSettings(kwDefaultsVersion: string, uiPluginVersion: string): Object | void {\n  if (semver.gt(uiPluginVersion, '1.4.1')) {\n    return semver.gt(kwDefaultsVersion, '1.9.9');\n  }\n\n  return true;\n}","import { render } from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=template&id=5f1987aa\"\nimport script from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { CATALOG } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\n\nimport Loading from '@shell/components/Loading';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nimport { KUBEWARDEN_APPS } from '../types';\n\nimport DefaultsBanner from '../components/DefaultsBanner';\n\nexport default {\n  components: {\n    DefaultsBanner, Loading, ResourceTable\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n\n    if ( this.$store.getters['cluster/canList'](CATALOG.APP) ) {\n      await this.$store.dispatch('catalog/load');\n\n      if ( !this.hideBannerDefaults ) {\n        this.apps = await this.$store.dispatch('cluster/findAll', { type: CATALOG.APP });\n      }\n    }\n  },\n\n  data() {\n    return { apps: null };\n  },\n\n  computed: {\n    defaultsApp() {\n      return this.apps?.find((a) => {\n        return a.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME] === KUBEWARDEN_APPS.RANCHER_DEFAULTS;\n      });\n    },\n\n    hideBannerDefaults() {\n      return this.$store.getters['kubewarden/hideBannerDefaults'] || !!this.defaultsApp;\n    },\n\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <DefaultsBanner v-if=\"!hideBannerDefaults\" />\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n      data-testid=\"kw-ps-resource-table\"\n    />\n  </div>\n</template>\n","import { render } from \"./policies.kubewarden.io.policyserver.vue?vue&type=template&id=2f23db10\"\nimport script from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".filter[data-v-9dcc5668]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end}.filter>*[data-v-9dcc5668]{margin:10px}.filter[data-v-9dcc5668]>:first-child{margin-left:0}.filter[data-v-9dcc5668]>:last-child{margin-right:0}@media only screen and (min-width:480px){.filter[data-v-9dcc5668]{width:100%}}@media only screen and (min-width:1281px){.filter[data-v-9dcc5668]{width:75%}}.policy__mode[data-v-9dcc5668]{display:flex;align-items:center}.policy__mode i[data-v-9dcc5668]{margin-left:5px;font-size:22px;color:var(--warning)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./PolicyList.vue?vue&type=style&index=0&id=9dcc5668&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"daaff300\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_createVNode","_component_LabeledSelect","value","$data","resources","$event","clearable","taggable","multiple","label","options","$options","resourceOptions","mode","searchable","modeOptions","placement","ref","type","onClick","_cache","args","resetFilter","_ctx","t","_component_ResourceTable","schema","$props","rows","filteredRows","headers","components","LabeledSelect","ResourceTable","props","resource","String","required","Array","Object","data","created","this","computed","$store","getters","out","filter","row","flatRules","flattenDeep","spec","rules","flatResources","flatMap","r","rowMode","selected","includes","sortBy","map","unshift","Set","flattenRule","methods","option","flattened","hasNamespaceSelector","namespaceSelector","__exports__","render","$fetchState","pending","_createBlock","_component_Loading","key","_component_Banner","color","_component_PolicyList","Banner","Loading","PolicyList","fetch","dispatch","kwDefaultsHelmChartSettingsCompatible","_component_DefaultsBanner","kwDefaultsHelmChartSettings","kwDefaultsVersion","uiPluginVersion","semver","DefaultsBanner","CATALOG","APP","UI_PLUGIN","allApps","kubewardenDefaultsApp","find","a","chart","metadata","annotations","CATALOG_ANNOTATIONS","RELEASE_NAME","KUBEWARDEN_APPS","RANCHER_DEFAULTS","name","KUBEWARDEN_CHARTS","DEFAULTS","kubewardenExtension","extensionsInstalled","ext","id","KUBEWARDEN_PRODUCT_NAME","version","hideBannerDefaults","apps","defaultsApp","___CSS_LOADER_EXPORT___","push","module","content","__esModule","default","locals","exports","add"],"sourceRoot":""}